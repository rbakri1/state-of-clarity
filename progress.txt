# Ralph Progress Log
Started: Sun 11 Jan 2026

## Codebase Patterns
- Database types are defined in lib/supabase/client.ts (not a separate types.ts file)
- SQL schema changes go in lib/supabase/schema.sql (single file, not migrations)
- Browser-safe Supabase client: use lib/supabase/browser.ts (not client.ts) in client components
- Use explicit type annotations in React map callbacks to avoid implicit any errors
- Wrap useSearchParams() in Suspense boundary for Next.js static page generation
- API routes go in app/api/ directory, use createServerSupabaseClient from lib/supabase/client.ts
- Components go in app/components/ directory
- Use lucide-react for icons
- Clean .next cache with `rm -rf .next` if build fails with manifest errors
- Protected routes should check auth and redirect to /auth/signin if not authenticated
- Use withErrorHandling wrapper for API routes for consistent error responses
- Sentry config files: sentry.client.config.ts, sentry.server.config.ts, sentry.edge.config.ts
- instrumentation.ts imports server/edge configs; instrumentation-client.ts handles client init
- Build type errors with Object.entries need explicit Record<string, T> type assertion

---

## 2026-01-11 - US-001
Thread: https://ampcode.com/threads/T-019bad10-4e9b-77ab-825f-29c9e6e8ac02
- Installed and configured Sentry for error tracking
- Files created: sentry.client.config.ts, sentry.server.config.ts, sentry.edge.config.ts
- Updated instrumentation.ts to import from config files
- Added SENTRY_DSN to .env.example
- next.config.mjs already had withSentryConfig wrapper
- SETUP.md already documented Sentry setup
- Fixed type error in brief page (Object.entries breakdown mapping)
- **Learnings for future iterations:**
  - The project uses instrumentation.ts + instrumentation-client.ts pattern (Sentry's newer approach)
  - sentry.client.config.ts is deprecated in favor of instrumentation-client.ts but both work
  - Add onRouterTransitionStart export to instrumentation-client.ts for navigation tracking
---


## 2026-01-11 - US-002
Thread: https://ampcode.com/threads/T-019bad13-847d-7049-a93a-be4b7c249867
- Created ErrorBoundary.tsx class component for catching React errors
- Features: Sentry error reporting, "Try again" reset button, "Show details" toggle
- Fallback UI with friendly error message and red styling
- Uses lucide-react icons (AlertTriangle, ChevronDown, ChevronUp, RefreshCw)
- **Learnings for future iterations:**
  - React error boundaries must be class components (not function components)
  - Use componentDidCatch to report to Sentry with component stack context
  - getDerivedStateFromError is for setting error state, componentDidCatch for side effects
---
