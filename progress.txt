# Ralph Progress Log
Started: Thu 15 Jan 2026 00:01:58 +04

## Codebase Patterns
- Use `withAuth` from `@/lib/auth/middleware` for authenticated API routes
- Use `withRateLimit` from `@/lib/auth/middleware` for rate-limited endpoints
- SSE helpers are in `lib/api/sse-helpers.ts` - use `createSSEResponse` and `sendSSE`
- Credit service functions: `hasCredits`, `deductCredits`, `refundCredits` from `lib/services/credit-service.ts`
- Accountability service functions: `createInvestigation`, `getInvestigation`, `listUserInvestigations`, `getInvestigationSources` from `lib/services/accountability-service.ts`

---

## 2026-01-15 - US-001
Thread: https://ampcode.com/threads/T-019bbe19-c93e-74ef-886a-87d813787d2a
- Created SSE helper functions in lib/api/sse-helpers.ts
- Exported `createSSEResponse()` with proper SSE headers
- Exported `sendSSE()` that formats events as SSE spec
- Files changed: lib/api/sse-helpers.ts (new)
- **Learnings for future iterations:**
  - TextEncoder should be created once at module level for efficiency
  - SSE format: `event: {name}\ndata: {json}\n\n` with double newline at end
---
